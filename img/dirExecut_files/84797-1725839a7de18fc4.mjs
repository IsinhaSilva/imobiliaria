(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[84797],{268536:(e,t,i)=>{i.d(t,{Z:()=>_});var n=i(27255),s=i(124580),r=i(172071),o=i(115535),a=i(402039),l=i(638525),u=i(12610),c=i(305689);function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const h=(0,c.ZP)();let p=null;class m{static getInstance(){return p||(p=new m),p}constructor(){d(this,"_logTimeoutLong",null),d(this,"_logTimeoutShort",null),d(this,"_moduleViewElements",{}),d(this,"_scrollListeners",{}),d(this,"_clickthroughStartEvent",null),d(this,"_utcDate",new Date);const e=(e,t)=>{const{activeElement:i}=document;i&&i.id===n.Z.VIDEO_IFRAME_ID&&i?setTimeout((()=>i.blur()),0):(s.Z.pause(u.LU),this.flushEvents(e,void 0))},t=(e=>{let t=!1;return(...i)=>{t||(t=!0,e(...i))}})((t=>e(!0)));window.addEventListener("beforeunload",t),window.addEventListener("pagehide",t),window.addEventListener("focus",(()=>{s.Z.resume(u.LU)})),window.addEventListener("blur",(t=>e(!1)))}_handleDatelineCrossover(){const e=new Date;this._utcDate.getUTCDate()!==e.getUTCDate()&&(this._utcDate=e,(0,o.Z)())}setTimeoutToFlushEvents(e){const t=e.event_type;if(m.EVENTS_FAST_FLUSH.includes(e.view_type)&&!this._logTimeoutShort&&13===t)this._logTimeoutShort=a.Z.setTimeout(this.flushEvents.bind(this,!1,!0),m.FLUSH_INTERVAL_SHORT);else if(!this._logTimeoutLong){const e=m.FLUSH_INTERVAL_LONG;this._logTimeoutLong=a.Z.setTimeout(this.flushEvents.bind(this),e)}}addEvent(e,t){const i=e.event_type;if(null==i)return;if(!(0,c.cA)(e))return;this.setTimeoutToFlushEvents(e);const n=(0,c.li)(e,t),s=c.Ch[i];s?(0,c.nc)(n,s).forEach(h.logImpression):(r.Z.increment("webapp.contextLogger.impressionType",.01,{event_type:i}),h.logContextEvent(n),this._handleDatelineCrossover(),12===i&&(h.logContextEvent({...n,event_type:7946}),this._clickthroughStartEvent={...n,time:1e6*Date.now()},l.Z.storeClickthroughProperties({view_type:n.view_type,view_parameter:n.view_parameter,component:n.component,element:n.element,object_id_str:n.object_id_str,view_data:n.view_data,aux_data:n.aux_data,clientTrackingParams:n.clientTrackingParams})))}flushEvents(e,t){var i;const n=null===(i=h.getContextEvents)||void 0===i?void 0:i.call(h);n&&!n.length||(this._handleDatelineCrossover(),h.flushContextEvents(e),t?this._resetShortTimerEvents():this._reset())}_reset(){this._resetShortTimerEvents(),this._resetLongTimerEvents()}_resetShortTimerEvents(){var e;null===(e=h.resetEventsBuffer)||void 0===e||e.call(h),clearTimeout(this._logTimeoutShort),this._logTimeoutShort=null}_resetLongTimerEvents(){var e;null===(e=h.resetEventsBuffer)||void 0===e||e.call(h),clearTimeout(this._logTimeoutLong),this._logTimeoutLong=null}logPlainObject(e){"event_type"in e&&this.addEvent({...e,..."aux_data"in e?{aux_data:{...e.aux_data}}:null})}}d(m,"FLUSH_INTERVAL_LONG",1e4),d(m,"FLUSH_INTERVAL_SHORT",300),d(m,"EVENTS_FAST_FLUSH",[9,3]),window.addEventListener&&window.addEventListener("focus",(()=>{const e=m.getInstance();if(e._clickthroughStartEvent){const t=e._clickthroughStartEvent;e._clickthroughStartEvent=null;const i={...t,event_type:4100,duration_ns:(0,c.h1)()-t.time};e.addEvent(i)}}));const _=m},638525:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(268536),s=i(768559),r=i(704115),o=i(927955),a=i(433780);const l={},u=(0,r.Z)()&&(0,r.Z)().debug_timespent,c=(0,a.Z)({flushEvents:e=>{n.Z.getInstance().flushEvents(e,void 0)},shouldShowLogStatements:u,track:(e,t)=>{const i=n.Z.getInstance(),r=o.Z.instance.getState();let a;if(r.pins&&e){const{pair_id:i,event_type:n}=e;if(4703===n&&i&&l[i])e.clientTrackingParams=l[i];else{var u;const o=e.object_id_str,c=o?r.pins[o]:null,d=null==t||null===(u=t.current)||void 0===u?void 0:u.location,h=null==t?void 0:t.previous;c&&d&&(a=(0,s.Z)(c,d,h)||`${c.tracking_params||""}~0`,e.clientTrackingParams=a,4702===n&&i&&(l[i]=a))}}i.addEvent(e)}})},402039:(e,t,i)=>{let n;i.d(t,{Z:()=>r}),void 0===n&&(n=i.g);const s=function(e,t){const i=(s=t)===n.setTimeout?function(e,t){return n.setTimeout(e,t)}:s===n.setInterval?function(e,t){return n.setInterval(e,t)}:s===n.clearTimeout?function(e){return n.clearTimeout(e)}:s===n.clearInterval?function(e){return n.clearInterval(e)}:s;var s;return function(e,t,n,...s){return i(e,t,n,...s)}},r={setTimeout:s(0,n.setTimeout),setInterval:s(0,n.setInterval),clearTimeout:s(0,n.clearTimeout),clearInterval:s(0,n.clearInterval)}},927955:(e,t,i)=>{i.d(t,{Z:()=>n});const n=new class{get instance(){return this.__storeInstance__}set instance(e){return this.__storeInstance__=e,e}set(e){return this.instance=e,e}}},952712:(e,t,i)=>{i.d(t,{H:()=>l});var n=i(968630),s=i.n(n);var r=i(395164);const o=new class{constructor(e){this.table={},this.interval=e,this.lastCallTime=Date.now()}_garbageCollectEntries(){Date.now()-this.lastCallTime>this.interval&&(this.table={})}_generateHash(e){const t=Object.keys(e).sort(),i=[];return t.forEach((t=>{if(e[t]){let n=s()(e[t])?JSON.stringify(e[t]):e[t]+"";n=t+":"+n,i.push(n)}})),i.join("")}getTableKey(e){return e.auxData?this._generateHash(Object.assign({message:e.errorObj.message},e.auxData)):e.errorObj.message?e.errorObj.message:""}isWithinRateLimit(e){this._garbageCollectEntries();const t=Date.now();this.lastCallTime=t;const i=this.getTableKey(e);return this.table[i]&&t-this.table[i]<this.interval||(this.table[i]=t,!1)}}(5e3),a={};a._reportToConsole=(e,t={})=>{if(console&&console.error){const{name:i="",message:n="No message available",stack:s="No stack trace available"}=e,r=`Name: ${i}\nMessage: ${n}\n----------\nStack: \n${s}\n`;console.error(r,t)}},a._reportToServer=(e,t)=>{const i={errorObj:e};t&&(i.auxData=t),o.isWithinRateLimit(i)||(0,r.T)({...e,message_detail:t?JSON.stringify(t):""})};const l=(e,t)=>{const{columnNumber:i="",fileName:n="",lineNumber:s="",message:r="",original_message:o="",name:l="",stack:u="",stack_trace:c="",moduleName:d="",location:h=""}=e,p={columnNumber:i,fileName:n,lineNumber:s,message:o||r,name:l,stack:u||c,moduleName:d,location:h};a._reportToConsole(p,t),function(e){const t=e.http_status||e.httpStatus||e.status;if(404===t||500===t)return!1;const i=e.stack||e.stack_trace;return!(i&&-1!==i.indexOf("global code")||e.message&&("Connectivity error or cancelled by navigation"===e.message||e.message.includes("count mfss fcw")||e.message.includes("evaluating 'elem.classList'")))}(e)&&a._reportToServer(p,t)};a.report=l},433780:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(172071),s=i(245474);function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const o="ACTIVE",a="PAUSED",l=()=>window&&window.performance&&window.performance.now?`(Time: ${(window.performance.now()/1e3).toFixed(3)}s)`:"",u=({flushEvents:e,shouldShowLogStatements:t=!1,track:i})=>{const u=new Map,c=t?console:{error:(...e)=>{},log:(...e)=>{},group:(...e)=>{},groupEnd:(...e)=>{}};console.group||(c.group=(...e)=>console.log(...e),c.groupEnd=(...e)=>{});return new class{constructor(){r(this,"appTimedPair",null),r(this,"clickthroughProperties",null),r(this,"historyStackContext",null),r(this,"offsiteTimedPair",null),r(this,"offsiteTimedPairForegroundId",null),r(this,"addEventListeners",(()=>{let e,t;"undefined"!==document.hidden?(e="hidden",t="visibilitychange"):"undefined"!==document.msHidden?(e="msHidden",t="msvisibilitychange"):"undefined"!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange");const i=t=>{document[e]?this.unregisterApp(!1,void 0,t):document.hasFocus()&&this.registerApp()};t&&document.addEventListener(t,i,!1),window.addEventListener("focus",this.registerApp),window.addEventListener("blur",(e=>this.unregisterApp(!1,void 0,e)));const s=(e=>{let t=!1;return(...i)=>{t||(t=!0,e(...i))}})((e=>this.unregisterApp(!0,void 0,e)));window.addEventListener("beforeunload",s),window.addEventListener("pagehide",s);const r=navigator&&navigator.userAgent.toLowerCase();r&&r.includes("macintosh")&&r.includes("chrome")&&window.addEventListener("popstate",(t=>{document.hasFocus()||document[e]||n.Z.increment("chrome_mac_back_forward_button",1)}))})),r(this,"storeClickthroughProperties",(e=>{this.clickthroughProperties&&n.Z.increment("webapp.metrics.clickthroughs.overwritten",1,{previousView:this.clickthroughProperties.view_type,previousViewParameter:this.clickthroughProperties.view_parameter,nextView:e.view_type,nextViewParameter:e.view_parameter}),this.clickthroughProperties=e})),r(this,"clearClickthroughProperties",(()=>{this.clickthroughProperties=null,this.offsiteTimedPair=null,this.offsiteTimedPairForegroundId=null})),r(this,"registerApp",(()=>{c.group("App Foreground",l()),null==this.appTimedPair?(this.appTimedPair=new s.Z,this.appTimedPair.start(),this._unpauseAllComponents(),this._endOffsiteTimedPair(),null!==this.appTimedPair&&void 0!==this.appTimedPair&&i({event_type:4700,pair_id:this.appTimedPair.uuid},this.historyStackContext)):c.error("TimedPair already exists for app."),c.groupEnd()})),r(this,"unregisterApp",((t=!1,n=!1,s)=>{c.group("App Background",l());const r=this.appTimedPair;if(null!=r){this._pauseAllComponents();const e=r.end();this._startOffsiteTimedPair(),i({event_type:4701,duration_ns:e,pair_id:r.uuid},this.historyStackContext),this.appTimedPair=null}else c.error("No TimedPair found for app.");const o=["beforeunload","pagehide"],a=o.includes(null==s?void 0:s.type),u=o.includes(null==s?void 0:s.pauseReason);(a||u)&&this._endOffsiteTimedPair(),n||e(null!=t&&t,void 0,s),c.groupEnd()})),r(this,"_activateComponent",(e=>{c.group("Activating component",l()),t&&c.log(e.getContext());const n=e.getTimedPair();if(n){n.start();const{view:t,viewParameter:s,component:r,element:o,objectId:a,clientTrackingParams:l}=e.getLoggerContext();i({event_type:4702,view_type:t,view_parameter:s,component:r,element:o,object_id_str:a,view_data:e.props.viewData,pair_id:n.uuid,clientTrackingParams:l,aux_data:{time_spent_foreground_pairid:this.appTimedPair&&this.appTimedPair.uuid,time_spent_parent_pairid:e.getParentId(),...e.props.auxData}},this.historyStackContext)}c.groupEnd()})),r(this,"_deactivateComponent",(e=>{c.group("Deactivating component",l()),t&&c.log(e.getContext());const n=e.getTimedPair();if(n){const{view:t,viewParameter:s,component:r,element:o,objectId:a,clientTrackingParams:l}=n,u=n.end();i({event_type:4703,view_type:t,view_parameter:s,component:r,element:o,object_id_str:a,view_data:e.props.viewData,duration_ns:u,pair_id:n.uuid,clientTrackingParams:l,aux_data:{time_spent_foreground_pairid:this.appTimedPair&&this.appTimedPair.uuid,time_spent_parent_pairid:e.getParentId(),...e.props.auxData}},this.historyStackContext)}c.groupEnd()})),r(this,"_startOffsiteTimedPair",(()=>{const{clickthroughProperties:e}=this;e&&(this.offsiteTimedPair=new s.Z({...e,view:186,viewParameter:e.view_parameter,objectId:e.object_id_str}),this.offsiteTimedPair.start(),this.offsiteTimedPairForegroundId=this.appTimedPair?this.appTimedPair.uuid:null,i({...e,event_type:4702,view_type:186,pair_id:this.offsiteTimedPair?this.offsiteTimedPair.uuid:null,aux_data:{...e.aux_data,time_spent_foreground_pairid:this.offsiteTimedPairForegroundId}},this.historyStackContext))})),r(this,"_endOffsiteTimedPair",(()=>{const{offsiteTimedPair:e,clickthroughProperties:t}=this;if(e&&t){const n=e.end();i({...t,event_type:4703,view_type:186,pair_id:this.offsiteTimedPair?this.offsiteTimedPair.uuid:null,aux_data:{...t.aux_data,time_spent_foreground_pairid:this.offsiteTimedPairForegroundId},duration_ns:n},this.historyStackContext),this.clearClickthroughProperties()}})),r(this,"_pauseAllComponents",(()=>{c.group("Pause all components"),u.forEach(((e,t,i)=>{e===o&&this._deactivateComponent(t),i.set(t,a)})),c.groupEnd()})),r(this,"_unpauseAllComponents",(()=>{c.group("Unpause all components"),u.forEach(((e,t)=>{t.setTimedPair(new s.Z(t.getLoggerContext()))})),u.forEach(((e,t)=>{u.set(t,o),this._activateComponent(t)})),c.groupEnd()}))}setHistoryStackContext(e){this.historyStackContext=e}registerComponent(e){null===this.appTimedPair?u.set(e,a):(u.set(e,o),this._activateComponent(e))}unregisterComponent(e){u.get(e)===o&&(this._deactivateComponent(e),e.setTimedPair(new s.Z(e.getLoggerContext()))),u.delete(e)}size(){return u.size}}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/84797-1725839a7de18fc4.mjs.map